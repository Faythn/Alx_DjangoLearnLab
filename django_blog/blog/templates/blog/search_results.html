{% extends "base.html" %}

{% block content %}
<h2>Search Results</h2>
<form method="get" action="{% url 'search_posts' %}">
    <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Search...">
    <button type="submit">Search</button>
</form>

<ul>
    {% for post in results %}
        <li>
            <a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a>
            <p>{{ post.content|truncatewords:20 }}</p>
            <p>Tags: 
                {% for tag in post.tags.all %}
                    <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>
                {% empty %}
                    No tags
                {% endfor %}
            </p>
        </li>
    {% empty %}
        <li>No posts found.</li>
    {% endfor %}
</ul>
{% endblock %}
